# ðŸ“ æ–‡ä»¶å­˜å‚¨é…ç½®è¯´æ˜Ž

## å­˜å‚¨è·¯å¾„é…ç½®

æœ¬é¡¹ç›®ä½¿ç”¨**ç›¸å¯¹è·¯å¾„**å­˜å‚¨ä¸Šä¼ çš„æ–‡ä»¶ï¼Œä¾¿äºŽåœ¨ä¸åŒçŽ¯å¢ƒä¸­éƒ¨ç½²ã€‚

### é…ç½®ä½ç½®

é…ç½®æ–‡ä»¶ï¼š`backend/src/main/resources/application.yml`

```yaml
app:
  # æ–‡ä»¶å­˜å‚¨è·¯å¾„ï¼ˆç›¸å¯¹è·¯å¾„ï¼ŒåŸºäºŽé¡¹ç›®æ ¹ç›®å½•ï¼‰
  upload-path: ./uploads
  # è§†é¢‘æ–‡ä»¶å­˜å‚¨è·¯å¾„
  video-path: ${app.upload-path}/videos
  # éŸ³é¢‘æ–‡ä»¶å­˜å‚¨è·¯å¾„
  audio-path: ${app.upload-path}/audio
  # å­—å¹•æ–‡ä»¶å­˜å‚¨è·¯å¾„
  subtitle-path: ${app.upload-path}/subtitles
  # ä¸´æ—¶æ–‡ä»¶å­˜å‚¨è·¯å¾„
  temp-path: ${app.upload-path}/temp
```

---

## ðŸ“‚ ç›®å½•ç»“æž„

```
xwqVideoSubtitle/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ target/
â”‚   â””â”€â”€ uploads/           # åŽç«¯è¿è¡Œæ—¶åˆ›å»º
â”‚       â”œâ”€â”€ videos/        # è§†é¢‘æ–‡ä»¶
â”‚       â”œâ”€â”€ audio/         # éŸ³é¢‘æ–‡ä»¶
â”‚       â”œâ”€â”€ subtitles/     # å­—å¹•æ–‡ä»¶
â”‚       â”œâ”€â”€ avatars/       # ç”¨æˆ·å¤´åƒ
â”‚       â””â”€â”€ temp/          # ä¸´æ—¶æ–‡ä»¶
â””â”€â”€ frontend/
```

---

## ðŸš€ éƒ¨ç½²è¯´æ˜Ž

### å¼€å‘çŽ¯å¢ƒ

ç›¸å¯¹è·¯å¾„ `./uploads` ä¼šåœ¨**åŽç«¯å¯åŠ¨ç›®å½•**ä¸‹åˆ›å»º `uploads` æ–‡ä»¶å¤¹ã€‚

**ä»Ž backend ç›®å½•å¯åŠ¨ï¼š**
```bash
cd xwqVideoSubtitle/backend
mvn spring-boot:run
# uploads æ–‡ä»¶å¤¹ä¼šåˆ›å»ºåœ¨ï¼šxwqVideoSubtitle/backend/uploads/
```

**ä»Žé¡¹ç›®æ ¹ç›®å½•å¯åŠ¨ï¼š**
```bash
cd xwqVideoSubtitle
java -jar backend/target/subtitle-generator-backend-1.0.0.jar
# uploads æ–‡ä»¶å¤¹ä¼šåˆ›å»ºåœ¨ï¼šxwqVideoSubtitle/uploads/
```

---

### ç”Ÿäº§çŽ¯å¢ƒ

#### æ–¹å¼1ï¼šä½¿ç”¨é»˜è®¤ç›¸å¯¹è·¯å¾„
```bash
# è§£åŽ‹éƒ¨ç½²åŒ…
unzip subtitle-generator-backend-1.0.0.jar -d app
cd app

# å¯åŠ¨åº”ç”¨
java -jar subtitle-generator-backend-1.0.0.jar

# uploads ä¼šåˆ›å»ºåœ¨ï¼šapp/uploads/
```

#### æ–¹å¼2ï¼šä½¿ç”¨çŽ¯å¢ƒå˜é‡è¦†ç›–ï¼ˆæŽ¨èï¼‰
```bash
# ä½¿ç”¨ç»å¯¹è·¯å¾„
export APP_UPLOAD_PATH=/data/uploads
java -jar subtitle-generator-backend-1.0.0.jar
```

#### æ–¹å¼3ï¼šä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°
```bash
java -jar subtitle-generator-backend-1.0.0.jar \
  --app.upload-path=/data/uploads
```

#### æ–¹å¼4ï¼šä½¿ç”¨å¤–éƒ¨é…ç½®æ–‡ä»¶
```bash
# åˆ›å»ºå¤–éƒ¨é…ç½®æ–‡ä»¶
cat > application.yml << 'EOF'
app:
  upload-path: /data/uploads
EOF

# å¯åŠ¨æ—¶æŒ‡å®šé…ç½®æ–‡ä»¶
java -jar subtitle-generator-backend-1.0.0.jar \
  --spring.config.location=file:./application.yml
```

---

## ðŸ“ æ³¨æ„äº‹é¡¹

### 1. æƒé™é—®é¢˜
ç¡®ä¿åº”ç”¨æœ‰æƒé™åˆ›å»ºå’Œå†™å…¥ `uploads` ç›®å½•ï¼š
```bash
# åˆ›å»ºç›®å½•
mkdir -p uploads/{videos,audio,subtitles,avatars,temp}

# è®¾ç½®æƒé™
chmod -R 755 uploads
```

### 2. ç£ç›˜ç©ºé—´
- è§†é¢‘æ–‡ä»¶å¯èƒ½å¾ˆå¤§ï¼ˆæœ€å¤§500MBï¼‰
- ç¡®ä¿ç£ç›˜ç©ºé—´å……è¶³
- å®šæœŸæ¸…ç†ä¸´æ—¶æ–‡ä»¶

### 3. å¤‡ä»½
é‡è¦æ–‡ä»¶åº”å®šæœŸå¤‡ä»½ï¼š
```bash
# å¤‡ä»½ uploads ç›®å½•
tar -czf uploads-backup-$(date +%Y%m%d).tar.gz uploads/
```

### 4. Gitå¿½ç•¥
`uploads/` ç›®å½•å·²æ·»åŠ åˆ° `.gitignore`ï¼Œä¸ä¼šè¢«æäº¤åˆ°ä»£ç ä»“åº“ã€‚

---

## ðŸ”§ é™æ€èµ„æºè®¿é—®

ä¸Šä¼ çš„æ–‡ä»¶é€šè¿‡ä»¥ä¸‹URLè®¿é—®ï¼š

### å¤´åƒ
```
http://localhost:8081/api/uploads/avatars/{filename}
```

### è§†é¢‘
```
http://localhost:8081/api/uploads/videos/{filename}
```

### å­—å¹•
```
http://localhost:8081/api/uploads/subtitles/{filename}
```

---

## ðŸ› ï¸ æ•…éšœæŽ’æŸ¥

### é—®é¢˜1ï¼šæ— æ³•åˆ›å»ºuploadsç›®å½•
**é”™è¯¯ä¿¡æ¯ï¼š** `æ— æ³•åˆ›å»ºç›®å½•æˆ–æ–‡ä»¶`

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ£€æŸ¥å½“å‰ç”¨æˆ·æƒé™
whoami

# æ‰‹åŠ¨åˆ›å»ºç›®å½•
mkdir -p uploads/{videos,audio,subtitles,avatars,temp}

# ä¿®æ”¹æ‰€æœ‰è€…
chown -R $USER:$USER uploads/
```

### é—®é¢˜2ï¼šæ–‡ä»¶ä¸Šä¼ å¤±è´¥
**å¯èƒ½åŽŸå› ï¼š**
1. ç£ç›˜ç©ºé—´ä¸è¶³
2. æƒé™ä¸è¶³
3. è·¯å¾„é…ç½®é”™è¯¯

**æ£€æŸ¥æ­¥éª¤ï¼š**
```bash
# æ£€æŸ¥ç£ç›˜ç©ºé—´
df -h

# æ£€æŸ¥ç›®å½•æƒé™
ls -la uploads/

# æ£€æŸ¥é…ç½®
grep "upload-path" backend/src/main/resources/application.yml
```

### é—®é¢˜3ï¼šæ‰¾ä¸åˆ°å·²ä¸Šä¼ çš„æ–‡ä»¶
**æ£€æŸ¥æ­¥éª¤ï¼š**
```bash
# æŸ¥çœ‹uploadsç›®å½•ä½ç½®
find . -name "uploads" -type d

# æŸ¥çœ‹æ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls -R uploads/
```

---

## ðŸ“Š å­˜å‚¨ç»Ÿè®¡

æŸ¥çœ‹å„ç›®å½•å ç”¨ç©ºé—´ï¼š
```bash
du -sh uploads/*
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
50M    uploads/avatars
2.5G   uploads/videos
150M   uploads/audio
20M    uploads/subtitles
5M     uploads/temp
```

---

## ðŸ” å®‰å…¨å»ºè®®

1. **æ–‡ä»¶ç±»åž‹éªŒè¯**ï¼šåŽç«¯å·²é…ç½®å…è®¸çš„æ–‡ä»¶æ ¼å¼
2. **æ–‡ä»¶å¤§å°é™åˆ¶**ï¼šè§†é¢‘æœ€å¤§500MBï¼Œå¤´åƒæœ€å¤§2MB
3. **ç›®å½•æƒé™**ï¼šè®¾ç½®ä¸º755ï¼Œé˜²æ­¢æœªæŽˆæƒè®¿é—®
4. **å®šæœŸæ¸…ç†**ï¼šæ¸…ç†ä¸´æ—¶æ–‡ä»¶å’Œè¿‡æœŸæ–‡ä»¶
5. **è®¿é—®æŽ§åˆ¶**ï¼šéƒ¨åˆ†èµ„æºéœ€è¦è®¤è¯æ‰èƒ½è®¿é—®

---

## ðŸ“¦ æ•°æ®è¿ç§»

å¦‚æžœéœ€è¦è¿ç§»åˆ°æ–°æœåŠ¡å™¨ï¼š

```bash
# 1. æ‰“åŒ…uploadsç›®å½•
tar -czf uploads.tar.gz uploads/

# 2. å¤åˆ¶åˆ°æ–°æœåŠ¡å™¨
scp uploads.tar.gz user@new-server:/path/to/app/

# 3. åœ¨æ–°æœåŠ¡å™¨è§£åŽ‹
tar -xzf uploads.tar.gz
```

---

**é…ç½®å®ŒæˆåŽï¼Œé‡å¯åŽç«¯æœåŠ¡å³å¯ç”Ÿæ•ˆï¼** ðŸŽ‰
